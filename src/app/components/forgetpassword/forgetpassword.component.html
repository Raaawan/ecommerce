<section class="py-5">

    @if (step===1) {
        <form [formGroup]="verifyEmail" class="p-3" (ngSubmit)="verifyEmailSubmit()">
            <div class="my-2">
                <label for="email" class="h2 fw-bold">please enter your email
                </label>
                <input type="email" formControlName="email" id="email" class="form-control" >
                @if (verifyEmail.get('email')?.errors && (verifyEmail.get('email')?.touched || verifyEmail.get('email')?.dirty)) {
                    <div class="alert alert-danger my-3 text-danger">
                       @if (verifyEmail.get('email')?.getError('required')) {
                           <p class="m-0"> Email is required </p>
                       }
                       @else if (verifyEmail.get('email')?.getError('email')) {
                           <p class="m-0"> Enter Valid Email </p>
       
                       }
                       
       
                    </div>   
       
                   }

            </div>
            <button class="btn-main ms-auto d-block" type="submit" [disabled]="verifyEmail.invalid"> Verify 
                @if (isLoading) {
                    <span> 
                        <i class="fas fa-spin fa-spinner"></i>
                    </span>
                }
            </button>
        </form>
    }
    @else if (step===2) {
        <form [formGroup]="verifyCode" class="p-3" (ngSubmit)="verifyCodeSubmit()">
            <div class="my-2">
                <label for="code" class="h2 fw-bold">please enter your verification code
                </label>
                <input type="text" formControlName="resetCode" id="code" class="form-control" >
                @if (verifyCode.get('resetCode')?.errors && (verifyCode.get('resetCode')?.touched || verifyCode.get('resetCode')?.dirty)) {
                    <div class="alert alert-danger my-3 text-danger">
                       @if (verifyCode.get('resetCode')?.getError('required')) {
                           <p class="m-0"> resetCode is required </p>
                       }
                       @else if (verifyCode.get('resetCode')?.getError('pattern')) {
                           <p class="m-0"> Enter Valid resetCode </p>
       
                       }
                       
       
                    </div>   
       
                   }

            </div>
            <button class="btn-main ms-auto d-block" type="submit" [disabled]="verifyCode.invalid"> Verify 
                @if (isLoading) {
                    <span> 
                        <i class="fas fa-spin fa-spinner"></i>
                    </span>
                }
            </button>
        </form>
        
    }
    @else if (step===3) {
        <form [formGroup]="resetPassword" class="p-3" (ngSubmit)="resetPasswordSubmit()">
            <div class="my-2">
                <label for="email"  class="h2 fw-bold">please enter your email
                </label>
                <input type="email" readonly formControlName="email" id="email" class="form-control" >
                @if (resetPassword.get('email')?.errors && (resetPassword.get('email')?.touched || resetPassword.get('email')?.dirty)) {
                    <div class="alert alert-danger my-3 text-danger">
                       @if (resetPassword.get('email')?.getError('required')) {
                           <p class="m-0"> Email is required </p>
                       }
                       @else if (resetPassword.get('email')?.getError('email')) {
                           <p class="m-0"> Enter Valid Email </p>
       
                       }
                       
       
                    </div>   
       
                   }

            </div>
            <div class="my-2">
                <label for="newPassword"> newPassword: </label>
                <input type="password" name="newPassword" id="newPassword" class="form-control" formControlName="newPassword" >
                @if (resetPassword.get('newPassword')?.errors && (resetPassword.get('newPassword')?.touched ||resetPassword.get('newPassword')?.dirty)) {
                    <div class="alert alert-danger my-3 text-danger">
                       @if (resetPassword.get('newPassword')?.getError('required')) {
                           <p class="m-0"> Password is required </p>
                       }
                       @else if (resetPassword.get('newPassword')?.getError('pattern')) {
                           <p class="m-0"> must be at least 6 chars
                            
    
    
    
                           </p>
       
                       }
                       
       
                    </div>   
       
                   }
            </div>
            <button class="btn-main ms-auto d-block" type="submit" [disabled]="resetPassword.invalid"> Verify 
                @if (isLoading) {
                    <span> 
                        <i class="fas fa-spin fa-spinner"></i>
                    </span>
                }
            </button>
        </form>
        
    }
</section>