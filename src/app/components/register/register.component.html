<section class=" p-2 my-4 rounded-4">
    <h1 class="h2 text-main">
        Register Now:
    </h1>
    <form [formGroup]="registerForm" (ngSubmit)="registerSubmit()">
        <div class="my-2">
            <label for="name"> name: </label>
            <input type="text" name="name" id="name" class="form-control" formControlName="name" [ngClass]="{
                'is-valid':!registerForm.get('name')?.errors && (registerForm.get('name')?.touched||registerForm.get('name')?.dirty),
                'is-invalid':registerForm.get('name')?.errors && (registerForm.get('name')?.touched||registerForm.get('name')?.dirty)
            }">
            @if (registerForm.get('name')?.errors && (registerForm.get('name')?.touched||registerForm.get('name')?.dirty)) {
             <div class="alert alert-danger my-3 text-danger">
                @if (registerForm.get('name')?.getError('required')) {
                    <p class="m-0"> Name is required </p>
                }
                @else if (registerForm.get('name')?.getError('minlength')) {
                    <p class="m-0"> Name Should be more than or equal  3 chars </p>

                }
                @else if (registerForm.get('name')?.getError('maxlength')) {
                    <p class="m-0"> Name Should be less than or equal  20 chars </p>

                }

             </div>   

            }
        </div>
        <div class="my-2">
            <label for="email"> email: </label>
            <input type="email" name="email" id="email" class="form-control" formControlName="email" [ngClass]="{
                'is-valid':!registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty),
                'is-invalid':registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty)
            }">
            @if (registerForm.get('email')?.errors && (registerForm.get('email')?.touched || registerForm.get('email')?.dirty)) {
                <div class="alert alert-danger my-3 text-danger">
                   @if (registerForm.get('email')?.getError('required')) {
                       <p class="m-0"> Email is required </p>
                   }
                   @else if (registerForm.get('email')?.getError('email')) {
                       <p class="m-0"> Enter Valid Email </p>
   
                   }
                   
   
                </div>   
   
               }
        </div>
        <div class="my-2">
            <label for="password"> password: </label>
            <input type="password" name="password" id="password" class="form-control" formControlName="password" [ngClass]="{
                'is-valid':!registerForm.get('password')?.errors && (registerForm.get('password')?.touched ||registerForm.get('password')?.dirty),
                'is-invalid':registerForm.get('password')?.errors && (registerForm.get('password')?.touched ||registerForm.get('password')?.dirty)
            }">
            @if (registerForm.get('password')?.errors && (registerForm.get('password')?.touched ||registerForm.get('password')?.dirty)) {
                <div class="alert alert-danger my-3 text-danger">
                   @if (registerForm.get('password')?.getError('required')) {
                       <p class="m-0"> Password is required </p>
                   }
                   @else if (registerForm.get('password')?.getError('pattern')) {
                       <p class="m-0"> must be at least 6 chars
                        



                       </p>
   
                   }
                   
   
                </div>   
   
               }
        </div>
        <div class="my-2">
            <label for="rePassword"> rePassword: </label>
            <input type="password" name="rePassword" id="rePassword" class="form-control" formControlName="rePassword" [ngClass]="{
                'is-valid':!registerForm.getError('mismatch') && (registerForm.get('rePassword')?.touched ||registerForm.get('rePassword')?.dirty),
                'is-invalid':registerForm.getError('mismatch') && (registerForm.get('rePassword')?.touched ||registerForm.get('rePassword')?.dirty)
            }">
            @if (registerForm.getError('mismatch') && (registerForm.get('rePassword')?.touched ||registerForm.get('rePassword')?.dirty)) {
                <div class="alert alert-danger my-3 text-danger">
                   
                  
                       <p class="m-0">Password confirmation is incorrect </p>
   
                   
                   
   
                </div>   
   
               }
        </div>
        <div class="my-2">
            <label for="phone"> phone: </label>
            <input type="tel" name="phone" id="phone" class="form-control" formControlName="phone" [ngClass]="{
                'is-valid':!registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched ||registerForm.get('phone')?.dirty),
                'is-invalid':registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched ||registerForm.get('phone')?.dirty)
            }">
            @if (registerForm.get('phone')?.errors && (registerForm.get('phone')?.touched ||registerForm.get('phone')?.dirty)) {
                <div class="alert alert-danger my-3 text-danger">
                   @if (registerForm.get('phone')?.getError('required')) {
                       <p class="m-0"> phone is required </p>
                   }
                   @else if (registerForm.get('phone')?.getError('pattern')) {
                       <p class="m-0">accept only egypt phone numbers </p>
   
                   }
                   
   
                </div>   
   
               }
        </div>
        <button class="btn-main ms-auto d-block" type="submit" [disabled]="registerForm.invalid||isLoading"> Register 
            @if (isLoading) {
                <span> 
                    <i class="fas fa-spin fa-spinner"></i>
                </span>
            }
        </button>
        @if (msgError) {
            <h6>Errors</h6>
            <p class="alert alert-danger text-danger my-3 m-0 ">{{msgError}}</p>
        }
        @if (msgsuccess) {
            <p class="alert alert-success text-success my-3 m-0 ">
                Register Successed..!
            </p>
        }

    </form>
</section>